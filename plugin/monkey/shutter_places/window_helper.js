!function(e){if(e===top){if(e.sp)return e.sp;var t,a,i,n,r,o,l,s,d,c,p,m,u,h,g,f,b,x,y=e.document,_=(t=Math.ceil(1e3*Math.random()),a=6==e.location.protocol.length?"https":"http",i=a+"://submit.shutterstock.com/api/user/downloads/map",n=a+"://gubnota.github.io/worldpan_osm_map/osm/{z}/{x}/{y}@2x.",r=navigator.userAgent.search("Chrome")>-1?"webp":"png",l={url:i,base:o=a+"://gubnota.github.io/fenki_js_helpers/plugin/monkey/shutter_places/",tile:n,ext:r,minZoom:2,maxZoom:8},s=function(t){_.ui.set_user_lang(),_ChangeMapOnClick(),_.button.build(),(e.localStorage.getItem("shutter_places_last")||(new Date).getTime()/1e3-_.ls.get(0,1)[0].time>1e3)&&_.http.get(function(t){_.ls.add(_.ls.prepare(t)),e.localStorage.setItem("shutter_places_last",parseInt((new Date).getTime()/1e3))},_.url)},d=function(e){var t,a,i,n;null===y.getElementById("shutter_places_window_helper_script_prev")&&(t=y,a="script",i=(6==y.location.protocol.length?"https:":"http:")+"//gubnota.github.io/fenki_js_helpers/plugin/monkey/shutter_places/window_helper.prev.dev.js",n="getElementsByTagName",(a=t.createElement(a)).setAttribute("id","shutter_places_window_helper_script_prev"),a.async=!0,a.src=i,"undefined"==typeof IFrameWindowHelper&&(a.onload=function(){ShutterPlacesWindowHelperScriptPrev.Button()}),(t[n]("head")[0]||t[n]("body")[0]).appendChild(a))},c=function(e){var a="ShutterPlacesButtonOpen"+t;this.click=function(e){y.getElementById("mapp"+_.id)||_.map.build();var t=y.getElementById(a);t.className?(t.className="",_.map.hide()):(t.className="open",_.map.show())};return this.build=function(e){if(null===y.getElementById(a)){var t=y.createElement("div"),i=y.createElement("style");i.innerHTML=["#"+a+"{position:fixed","padding:11px 11px 22px","background:#D91E18","color:#fff","font-size:14px","font-weight:800","margin:0","border-radius:3px","right:-22px","max-width:200px","cursor: pointer",'font-family:"PT Sans"',"top:65px","z-index:9999","line-height:11px","height:15px","transform:rotate(-90deg)","text-transform:uppercase","overflow:hidden","text-align:center","outline-style:none"].join(";")+"}",i.innerHTML+="#"+a+":hover{"+["right:-21px","background:#df3b3b","box-shadow:0 2px 4px 0 rgba(71,0,0,.31)"].join(";")+"}#"+a+".open{display:none}",t.id=a,t.innerHTML=_.dic[_.lang].Places,y.body.appendChild(i.cloneNode(!0)),y.body.appendChild(t.cloneNode(!0)),y.getElementById(a).onclick=_.button.click}},{build:build,click:click,hide:function(e){y.getElementById(a).className="open"},show:function(e){y.getElementById(a).className=""}}}(),p=function(e){this.startDate="",this._startDate="",this.endDate="",this._endDate="",this.startPicker=void 0,this.endPicker=void 0,this.build=function(){if(!(e=y.getElementById("calendar_data_picker_css"))){(e=y.createElement("style")).id="calendar_data_picker",e.innerHTML=["#datepickerholder"+t+"{z-index: 103;margin:0 auto;text-align:center;margin-left:50px;position: fixed;display: inline-block}",".datepickerholder {display: inline-block;border: 2px solid rgba(0, 0, 0, 0.2);border-radius: 4px;margin-top: 10px;}",".datepickerholder label{cursor:pointer;width: 120px;font-family: PT Sans;font-weight:bold;background: #fff;display: block;padding: 0;margin: 0;border-radius: 4px 4px 0 0;}",".datepickerholder:hover *{background:#f4f4f4}","input[type=text]#startDate,input[type=text]#endDate{cursor:pointer;outline-style: none;padding: 0;width: 120px;height:21px;margin: 0;border:none;text-align: center;font-size: 13px;border-radius: 0 0 4px 4px;}"].join("");var e,a=y.getElementById("mapp"+t);a&&a.insertAdjacentElement("beforeBegin",e),(e=y.createElement("link")).rel="stylesheet",e.href=o+"libs/pikaday.css",y.body.insertAdjacentElement("beforeEnd",e);var i=y.createElement("script");i.async="true",i.src=o+"libs/pikaday.min.js",y.body.insertAdjacentElement("beforeEnd",i),i.onload=function(e){_.cal.init()}}},this.updateStartDate=function(e){(e=_.cal).startPicker.setStartRange(startDate),e.endPicker.setStartRange(startDate),e.endPicker.setMinDate(startDate)},this.updateEndDate=function(e){(e=_.cal).startPicker.setEndRange(endDate),e.startPicker.setMaxDate(endDate),e.endPicker.setEndRange(endDate)};return{build:build,init:function(){var e=_.cal;if(!y.getElementById("datepickerholder"+t)){var a=y.getElementById("mapp"+t);a&&a.insertAdjacentHTML("afterBegin",["<div id=datepickerholder"+t+">",'<div class="datepickerholder">','<label for="startDate">Start:</label>','<input type="text" id="startDate">',"</div>","",'<div class="datepickerholder">','<label for="endDate">End:</label>','<input type="text" id="endDate">',"</div>","</div>"].join(""))}e.startPicker=new Pikaday({field:y.getElementById("startDate"),minDate:new Date(_.ls.get_bounds().start),maxDate:new Date(_.ls.get_bounds().end),onSelect:function(){startDate=this.getDate(),updateStartDate(),_.map.clear_markers(),_.map.markers(_.ls.get(_.cal.startPicker.getDate(),_.cal.endPicker.getDate()))}}),e.endPicker=new Pikaday({field:y.getElementById("endDate"),minDate:new Date(_.ls.get_bounds().start),maxDate:new Date(_.ls.get_bounds().end),onSelect:function(){endDate=this.getDate(),updateEndDate(),_.map.clear_markers(),_.map.markers(_.ls.get(_.cal.startPicker.getDate(),_.cal.endPicker.getDate()))}}),e._startDate=e.startPicker.getDate(),e._endDate=e.endPicker.getDate(),e._startDate&&(e.startDate=e._startDate,e.updateStartDate()),e._endDate&&(e.endDate=e._endDate,e.updateEndDate())},init_prev:d,startDate:startDate,endDate:endDate,startPicker:startPicker,endPicker:endPicker,updateStartDate:updateStartDate,updateEndDate:updateEndDate,clear:function(){_.cal.startPicker.setDate(""),_.cal.endPicker.setDate("")}}}(),m=function(){return this.get=function(){var t=y.querySelectorAll(".contributor-avatar")[0];if(t){var a=t.src.match(/[0-9]+/)[0],i=e.localStorage.getItem("shutter_places_user");if(a&&!i)return e.localStorage.setItem("shutter_places_user",a),{id:a,reload:!1};if(i&&a!=i)return e.localStorage.setItem("shutter_places_user",a),{id:a,reload:!0};if(a&&a==i)return{id:a,reload:!1}}},{get:get}}(),u=function(){return this.get=function(){var t=e.localStorage.getItem("shutter_places_backup_server");t&&_.http.get(t)},this.set=function(){},{get:get,set:set}}(),h=function(){var l="shutter_places_map_container"+t,s=function(){27==event.keyCode&&(_.map.hide(),_.button.show())};this.draw=function(){var e=L.map("mesta"+t,{maxZoom:8,minZoom:2,zoom:3,maxBounds:[[88,220],[-88,-220]],layers:[]}).setView([0,0],2);e.addControl((new L.Control.Scale).setPosition("bottomleft")),L.tileLayer(n+r).addTo(e),this.map=e};return{build:function(e){if(!(a=y.getElementById("shuttermaps_map_css")))if((a=y.createElement("style")).id="shuttermaps_map_css",a.innerHTML=["#shutter_places_map_container%id% .leaflet-container .leaflet-top,#shutter_places_map_container%id% .leaflet-container .leaflet-bottom{background:transparent} #shutter_places_map_container%id%.hidden{display:none;}","#mesta%id%,#side%id%,#mesta%id% *,#side%id% *{font-family:sans-serif,Arial,Verdana;}","#side%id% .button{border:2px solid rgba(0, 0, 0, 0.6);padding:6px;margin:5px 0;cursor:pointer;color:#0078A8; text-align:center;display:block}","#side%id%{display:none;background: #fff;width:0px;height: 100% !important;position: fixed;right: 0px;z-index: 103;box-sizing: border-box;padding: 10px;}","#side%id%.open{display:block;width:300px;box-shadow:0 0 30px rgba(0,0,0,0.5);right: 0;}","#side%id% p, #side%id% div, #side%id% h2 {text-align: center;}","#side%id% h2 {color:#0078A8;text-align:center;font-weight: normal;}","#side%id% p img{border-radius:5px;margin:0 auto;width:auto;min-height:150px;max-height:250px;}",'#side%id% p::after,#side%id% h2::after{color:#ddd;content:"¶";}',"#side%id% a {color: #298aae;text-decoration: none;}","#mesta%id%{background:#ddd;position: fixed;top:0;left:0;width: 100% !important;height: 100% !important;padding: 0 !important;margin: 0 !important;z-index:102}","#mesta%id% .marker-icon {border: 2px solid #0078A8;width: 4px;height: 4px;border-radius: 50%;background-color: #fff;transition: opacity 1s ease-in-out;}","#mesta%id% .marker-icon img {width: 100%;max-height: 100%;vertical-align: middle;transition: opacity 1s ease-in-out;}","#mesta%id% .holder {width: 100px;height: 67px;overflow: hidden;border: 2px solid #0078A8;background-color: #fff;border-radius: 5px;background-size: cover;cursor: pointer;}","#mesta%id% .holder.mini{height: 50px;width: 50px;}","#mesta%id% .holder.left{margin-left: -100px;}","#mesta%id% .holder.left.mini{margin-left: -50px;}","#mesta%id% .holder.top{margin-top: -67px;}","#mesta%id% .holder.top.mini{margin-top: -50px;}","#mesta%id% .holder.top.left{margin-left: -67px;margin-top: -100px;width: 67px;height: 100px;}","#mesta%id% .holder.top.left.mini{margin-left: -50px;margin-top: -50px;width: 50px;height: 50px;}","#mesta%id% .marker-icon:hover, #mesta%id% .holder:hover{border-color: #999;}","#mesta%id% .marker-icon:hover{z-index: 1000;}","#mesta%id% .leaflet-container #mesta%id% .leaflet-control-scale{font-size: 12px;font-weight: bold;}","#mesta%id% .leaflet-control-scale-line{box-shadow: 1px 0 0 #fff, -1px 0 0 #fff;color: #000;text-shadow: 1px 1px 0 #fff, -1px -1px 0 #fff, -1px 1px 0 #fff, 1px -1px 0 #fff;background: transparent !important;border: 1px solid #000;border-top:none;}","#mesta%id% .leaflet-control-scale-line:not(:first-child){margin-top: -1px;border: 1px solid #000;border-bottom: none;}",".close-sign {outline-style: none;position: fixed;top: 5px;right: 5px;height: 36px;width: 36px;color: rgba(0, 0, 0, 0.2);font-size: 38px;float: right;cursor: pointer;line-height: 0.7;vertical-align: middle;font-style: normal;font-weight: bold;background-color: transparent;border: none;padding: 0;margin: 0;z-index: 103;}"].join("").replace(/%id%/g,t),y.body.insertAdjacentElement("beforeEnd",a),"undefined"==typeof L){var a,i=y.createElement("script");i.async="true",i.src=o+"leaflet/leaflet.js",y.body.insertAdjacentElement("beforeEnd",i),i.onload=function(e){_.map.init(),_.map.draw(),_.map.clear_markers(),_.map.markers(_.ls.get())},(a=y.createElement("link")).rel="stylesheet",a.href=o+"leaflet/leaflet.css",y.body.insertAdjacentElement("beforeEnd",a)}else y.getElementById(l)||(_.map.init(),_.map.draw())},init:function(e){y.getElementById(l)||(y.body.insertAdjacentHTML("afterBegin",['<div id="'+l+'">',"<div id=side"+t+"></div>",'<button class="close-sign" type="button">✕</button>',"<div id=mapp"+t+">","<div id=mesta"+t+"></div>","</div>","</div>"].join("")),_.http.get(function(e){_.ls.add(_.ls.prepare(e)),_.map.markers(_.ls.get(0,10))},_.url),_.cal.build(),y.querySelector(".close-sign").onclick=function(){_.map.hide(),_.button.show()}),y.body.onkeyup=s},redraw:function(){y.getElementById("mesta"+t).innerHTML="",_.map.draw()},draw:draw,markers:function(i){if(i&&i.length){_.map.current_markers=i;var n=y.getElementById("selected_markers");n&&(n.innerText=i.length);for(var r=new Array(i.length).fill(""),o=0;o<i.length;o++){for(var l=[""," left"," left top"," top"],s=[],d=[],c=0;c<o;c++)Math.abs(i[o].coordinates[0]-i[c].coordinates[0])+Math.abs(i[o].coordinates[1]-i[c].coordinates[1])<.21&&(0==s.length&&(s[0]=o),s[s.length]=c);for(var p=0;p<s.length;p++)r[s[p]]=l[p%4],d[s[p]]="",p>3&&(d[s[p]]="transform:translate3d("+(p%2==0?-p%3*2+2:p%3*2+2)+"px,"+(p%2==0?2*(8-p%5*3-3):2*(p%5*2-3))+"px,0) rotate("+(p%2==0?1*(-p%8*1-1):1*(p%8*1-1))+"deg) skew("+1*(p%7*1-1)+"deg)")}for(o=0;o<i.length;o++){var m=a+"://image.shutterstock.com/mosaic_250/0/0/"+i[o].media_id+".jpg",u=L.divIcon({className:"marker-icon",iconSize:4,html:'<div class="holder mini'+r[o]+'" style="background-image:url('+m+");"+(d[o]||"")+'" data-city="'+(i[o].city||"")+'" data-country="'+(i[o].country||"")+'" data-coordinates="'+(i[o].coordinates[0]||"-70")+","+(i[o].coordinates[1]||parseInt(180*Math.random()))+'" data-time="'+(i[o].time||0)+'" data-id="'+(i[o].media_id||0)+'" data-type="'+(i[o].media_type||"photo")+'" data-marker="'+o+'"></div>'});L.marker([i[o].coordinates[0],i[o].coordinates[1]],{icon:u}).addTo(this.map)}var h=y.querySelectorAll(".holder");for(o=h.length-1;o>=0;o--)h[o].onclick=function(i){var n=y.getElementById("side"+t),r=i.target;n.classList.add("open"),e.innerWidth>1e3&&e.innerWidth-r.getBoundingClientRect().right<300?n.style.right="400px":n.style.right="";var o="";r.getAttribute("data-city").length>0&&(o+=r.getAttribute("data-city")+", "),r.getAttribute("data-country").length>0&&(o+=r.getAttribute("data-country")),o=""==o?"Undefined":"<span onclick=\"sp.map.select_by_name('"+r.getAttribute("data-country")+"')\">"+o+"</span>",n.innerHTML="<h2>"+o+"</h2>",n.innerHTML+='<p onclick="sp.map.select_by_name('+r.getAttribute("data-id")+')"><img src="'+a+"://image.shutterstock.com/mosaic_250/0/0/"+r.getAttribute("data-id")+'.jpg"></p>',n.innerHTML+='<a href="'+a+"://www.shutterstock.com/similar-"+r.getAttribute("data-id")+'/index.html" target=_blank class="button">'+_.dic[_.lang].Similar+"</a>",n.innerHTML+='<a href="https://www.google.com/searchbyimage?&amp;image_url='+e.encodeURI(a+"://image.shutterstock.com/mosaic_250/0/0/"+r.getAttribute("data-id")+".jpg")+'" target=_blank class="button google_images">'+_.dic[_.lang].Who+"</a>",n.innerHTML+="<br>"+_.dic[_.lang].Time+": <strong>"+new Date(1e3*r.getAttribute("data-time")).toLocaleString(navigator.language)+"</strong>",n.innerHTML+="<br>"+_.dic[_.lang].Selected+': <strong id="selected_markers">'+y.querySelectorAll(".marker-icon").length+"</strong>",n.innerHTML+='<br>id: <strong id="media_id" onclick="sp.map.select_by_name('+r.getAttribute("data-id")+')" style="cursor:pointer">'+r.getAttribute("data-id")+"</strong>",n.innerHTML+='<br><div onclick="sp.map.select_all()" class="button">'+_.dic[_.lang].Show+"</div>"},h[o].onmouseenter=function(e){for(var t=0,a=y.querySelectorAll(".marker-icon"),i=a.length-1;i>=0;i--)t=Math.max(a[i].style.zIndex,t,101),a[i].style.zIndex>1e3&&(a[i].style.zIndex-=2);e.target.parentElement.style.zIndex=t+1};y.querySelector("#mesta"+t).onclick=function(e){e.target.classList.contains("holder")||y.getElementById("side"+t).classList.remove("open")}}},clear_markers:function(){for(var e=y.querySelectorAll(".marker-icon"),t=0;t<e.length;t++)e[t].remove()},contextmenu:function(){this.map.on("contextmenu",function(e){i="https://maps.google.com/maps/api/geocode/json?address="+e.latlng.lat+","+e.latlng.lng+"&language="+_.lang;var t=new XMLHttpRequest;t.open("GET",i,!0),t.onload=function(a){if(200==t.status){var i=JSON.parse(t.responseText),n=i.status;n="OK"==n?"<b onclick=\"(function(){var v=document.getElementsByName('searchboxinput')[0];if(!v)return;v.focus();v.value='"+e.latlng.lat.toFixed(4)+","+e.latlng.lng.toFixed(4)+"'})()\">@"+e.latlng.lat.toFixed(4)+","+e.latlng.lng.toFixed(4)+"</b><br>"+i.results[0].formatted_address:"<b>@"+e.latlng.lat.toFixed(4)+","+e.latlng.lng.toFixed(4)+"</b>",L.popup().setLatLng([e.latlng.lat,e.latlng.lng]).setContent(n).openOn(h)}},t.send()})},current_markers:[],select_by_name:function(e){var t=_.ls.search(e);if(t&&t.length>0){_.cal.clear(),_.map.clear_markers(),_.map.markers(t);var a=y.querySelector("#side"+_.id+" h2 span");"number"==typeof e&&(a.innerText=t[0].media_id||0),"string"==typeof e&&(a.innerText=t[0].country||"")}},select_all:function(){_.cal.clear(),_.map.clear_markers(),_.map.markers(_.ls.get(0,-1))},hide:function(){var e=y.getElementById(l);e&&(e.className="hidden")},show:function(){_.map.init();var e=y.getElementById(l);e&&(e.className="")},keyup:s}}(),g=function(e){return this.fetch=function(e,t,a,i){var n=new XMLHttpRequest;n.onload=function(){n.readyState==XMLHttpRequest.DONE&&e(n.responseText)},i||(i=null),n.open(a,t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(i)},this.get=function(e,t,a){return a&&(t=t+"?"+build_http_query(a)),fetch(e,t,"GET",a)},this.build_http_query=function(e){var t="";for(var a in e){var i=e[a];"object"==typeof i&&(i=build_http_query(i)),t+=encodeURIComponent(a)+"="+encodeURIComponent(i)+"&"}return t.length>0&&(t=t.substring(0,t.length-1)),t},this.post=function(e,t,a){return"object"==typeof a&&(a=build_http_query(a)),fetch(e,t,"POST",a)},{get:get,post:post,fetch:fetch,build_http_query:build_http_query}}(),f=function(t){return this.sort=function(e,t){return t.time-e.time},this.search=function(t){var a=[];if(void 0!==t)for(var i=JSON.parse(e.localStorage.getItem("shutter_places")),n=i.length-1;n>=0;n--)"number"==typeof t&&i[n].media_id===t?a.push(i[n]):"string"==typeof t&&i[n].country&&i[n].country.search(t)>-1?a.push(i[n]):"object"==typeof t&&t instanceof Array&&2==t.length&&i[n].coordinates[0]==t[0]&&i[n].coordinates[1]==t[1]&&a.push(i[n]);return a},this.get=function(t,a){var i=[];if(void 0!==e.localStorage?"[{"==(e.localStorage.getItem("shutter_places")+"").substr(0,2)&&(i=JSON.parse(e.localStorage.getItem("shutter_places"))):void 0!==e.shutter_places&&(i=JSON.parse(e.shutter_places)),"object"==typeof i&&i.length>0){if(t||"number"==typeof t||(t=0),-1!=a&&!a&&"number"!=typeof a)a=10;if("number"==typeof t&&"number"==typeof a)return-1==a?i.splice(t):i.splice(t,a);if(t instanceof Date&&a instanceof Date||"string"==typeof t&&"string"==typeof a){if("string"==typeof t&&(t=new Date(t),a=new Date(a)),t=parseInt(t.getTime()/1e3),a=parseInt(a.getTime()/1e3)+86400,isNaN(t)||isNaN(a))return;for(var n=[],r=i.length-1;r>=0;r--)i[r].time>=t&&i[r].time<=a&&n.push(i[r]);return n}}},this.get_bounds=function(t){var a={start:0,end:0},i=JSON.parse(e.localStorage.getItem("shutter_places"));return void 0!==i&&i.length>0&&(a={start:i[0].time,end:i[i.length-1].time}),t||(a.start=new Date(1e3*a.start),a.end=new Date(1e3*a.end)),a},this.add=function(t){if("string"==typeof t&&"[{"==(t+"").substr(0,2)&&(t=JSON.parse(t)),"object"==typeof t&&(t=_.ls.prepare(t)),void 0!==t&&t.length&&void 0!==e.localStorage)if("[{"==(e.localStorage.getItem("shutter_places")+"").substr(0,2)){if(stock=JSON.parse(e.localStorage.getItem("shutter_places")),void 0!==t&&t.length){for(var a=(t=this.prepare(t)).length-1;a>=0;a--){for(var i=!1,n=0;n<stock.length;n++)if(stock[n].media_id&&stock[n].time===t[a].time&&stock[n].media_id===t[a].media_id){i=!0,stock[n]=t[a];break}i||stock.push(t[a])}stock=stock.sort(_.ls.sort);for(var r=JSON.stringify(stock);r.length>5e6;)stock.splice(0,1),r=JSON.stringify(stock);e.localStorage.setItem("shutter_places",JSON.stringify(stock))}}else e.localStorage.setItem("shutter_places",JSON.stringify(t))},this.prepare=function(e){if("string"==typeof e&&"[{"==e.substr(0,2)&&(e=JSON.parse(e)),e.length>0&&void 0!==e[0].media_id);else{if(void 0===e.media_id||"object"!=typeof e)return;e=[e]}for(var t=e.length-1;t>=0;t--)"number"!=typeof e[t].time&&(e[t].time=parseInt(new Date(e[t].time).getTime()/1e3)),"image"==e[t].media_type&&delete e[t].media_type,void 0!==e[t].aspect&&delete e[t].aspect,void 0!==e[t].region&&delete e[t].region;return e},{sort:sort,add:add,prepare:prepare,get:get,search:search,get_bounds:get_bounds}}(),b=function(t){return this.get_user_lang=function(){var t=y.cookie.match(new RegExp("lang=([^;]+)"));return t&&void 0!==t[1]?t[1].toString():void 0!==e.navigator.languages[0]?e.navigator.languages[0].substring(0,2).toLowerCase():"en"},this.set_user_lang=function(){var e=_.ui.get_user_lang();"object"==typeof _.dic[e]&&(_.lang=e)},{get_user_lang:get_user_lang,set_user_lang:set_user_lang}}(),(x={Button:function(e){s(),d()},button:c,init_prev:d,init:s,ls:f,cal:p,map:h,ui:b,http:g,https:a,user:m,backup:u,localStorage:f,base:o,url:i,id:t,lang:"en",dic:{en:{Places:"Places",Collapse:"Collapse",Thumbnail:"Thumbnail",Similar:"Similar on Site",Who:"Google Images",Time:"Time",Place:"Place",Undefined:"Undefined",Show:"Show all",Map:"Sales map",Selected:"Selected"},ru:{Places:"Места",Collapse:"Свернуть",Thumbnail:"Миниатюра",Similar:"Похожие на сайте",Who:"Кто использует работу",Time:"Время покупки",Place:"Место покупки",Undefined:"Не определено",Show:"Показать всё",Map:"Карта продаж",Selected:"Выбрано продаж"},zh:{Places:"地方",Collapse:"关闭",Thumbnail:"缩略图",Similar:"类似的图片",Who:"谁使用此图片",Time:"购物时间",Place:"购物场所",Undefined:"未定义",Show:"显示所有",Map:"销售地图",Selected:"已选择"},fr:{Places:"Lieux",Collapse:"Fermer",Thumbnail:"Miniature",Similar:"Similaires dans le site",Who:"Qui utilise l'image",Time:"Temps",Place:"Lieu",Undefined:"Indéterminé",Show:"Montre tout",Map:"Carte de vente",Selected:"Choisi"},pl:{Places:"Miejsca",Collapse:"Zwiń okno",Thumbnail:"Miniatura",Similar:"Podobne w witrynie",Who:"Kto korzysta z obrazu",Time:"Pora",Place:"Miejsce",Undefined:"Nieokreślone",Show:"Pokaż wszystko",Map:"Mapa sprzedaży",Selected:"Wybrany"},es:{Places:"Lugares",Collapse:"Cerrar",Thumbnail:"Miniatura",Similar:"Similar en el sitio",Who:"¿Quién utiliza la imagen",Time:"Tiempo",Place:"Lugar",Undefined:"Indefinido",Show:"Mostrar todo",Map:"Mapa de ventas",Selected:"Seleccionado"},tr:{Places:"Yerler",Collapse:"Yakın",Thumbnail:"Küçük resim",Similar:"Sitedeki benzer",Who:"Kim resmi kullanır",Time:"Zaman",Place:"Yer",Undefined:"Tanımsız",Show:"Tümünü göster",Map:"Satış haritası",Selected:"Seçilmiş"},pt:{Places:"Locais",Collapse:"Fechar",Thumbnail:"Thumbnail",Similar:"Similar no Site",Who:"Quem utiliza imagem",Time:"Tempo",Place:"Lugar",Undefined:"Indefinido",Show:"Mostre tudo",Map:"Mapa de vendas",Selected:"Selecionado"},de:{Places:"Places",Collapse:"Fenster",Thumbnail:"Daumennagel",Similar:"Ähnliche vor Ort",Who:"Wer nutzt Bild",Time:"Zeit",Place:"Platz",Undefined:"Undefiniert",Show:"Zeige alles",Map:"Verkaufskarte",Selected:"Ausgewählt"},id:{Places:"Tempat",Collapse:"Tutup",Thumbnail:"Miniatur",Similar:"Serupa di Situs",Who:"Siapa yang menggunakan gambar",Time:"Waktu",Place:"Tempat",Undefined:"Terdefinisi",Show:"Tunjukkan semua",Map:"Peta penjualan",Selected:"Terpilih"},jp:{Places:"場所",Collapse:"隠す",Thumbnail:"サムネイル",Similar:"サイト上内サイト",Who:"誰が絵を利用",Time:"時間",Place:"場所",Undefined:"未定義",Show:"すべて表示する",Map:"セールスマップ",Selected:"選択された"}}}).settings=l,x);e.sp=_,e.ShutterPlacesWindowHelperScript||(e.ShutterPlacesWindowHelperScript=_)}}(this),sp.table=function(e){return this.param={id:"ShutterPlacesInfoIframe"+sp.id,bid:"ShutterPlacesTableButton"+sp.id},this._setElementText=function(e,t){e.innerHTML=t},this._dismissLinkClick=function(){return _close(),!1},this._createDismissLink=function(){var e=document.createElement("a");return _setElementText(e,param.Collapse),e.id=this.param.bid,e.href="#",e.style.cssText="color:#fff;margin:4px 10px 10px;text-decoration:none;font:normal 15px/17px 'PT Sans',Arial;",e},this._createDialogElement=function(){var e=document.createElement("div"),t=document.createElement("div");t.style.cssText="position:fixed;width:100%;height:100%;z-index:9999;top:0;left:0;opacity:0.3;filter:alpha(opacity=30);background-color:#000;";var a=document.createElement("div");a.style.cssText='position:fixed;height:100%;width:100%;background-color:#fff6e9;padding:10px 0;box-shadow:4px 4px 25px #888;font: 15px/17px "PT Sans",Arial;z-index: 10000;';var i=document.createElement("style");i.innerHTML="#"+this.param.id+" table{"+["background:#fff6e9","width:100%","margin-bottom:50px","border-bottom:2px solid #bdb6ad","margin:10px 0"].join(";")+"}#"+this.param.id+" th{"+["display:table-cell","padding:2px 10px","border:solid #ece4d8","border-width:0 2px 2px 0","color:#cd596b",'font-family:"Open Sans",Myriad,Calibri,sans-serif',"font-weight:bold","font-size:.85em"].join(";")+"}#"+this.param.id+" td{"+["border-width:0 2px 0 0","border:solid #ece4d8","vertical-align:middle","text-align:center"].join(";")+"}#"+this.param.id+" table:after{"+['content:" "',"display:block","width:100%","height:100px"].join(";")+"}#"+this.param.id+" td.thumb img{"+["min-width:50px","min-height:50px","max-width:100px"].join(";")+"}";var n=document.createElement("div");n.style.cssText="z-index:10000;position:fixed;top:0",n.id="ShutterPlacesDialogTable"+sp.id;var r=_createDismissLink(param.Collapse);r.style.cssText=r.style.cssText+";display:block;background-color:#193441;text-align:center;padding:4px;font:normal 15px/17px 'PT Sans',Arial",a.appendChild(r);var o=document.createElement("div");return o.id=this.param.id,o.style.cssText="width:100%;height:100%;overflow-y:scroll;",a.appendChild(o),n.appendChild(a),e.appendChild(t),e.appendChild(n),e.appendChild(i),e},this._showShutterPlacesWindowHelperScript=function(){var e=document.getElementById(this.param.id);null!=e?e.style.display="block":document.getElementById(this.param.bid).onclick=_dismissLinkClick},this.Dialog=function(){Button(),_showShutterPlacesWindowHelperScript(),sp.table.draw_table()},this._close=function(){var e=document.getElementById("ShutterPlacesDialogTable"+sp.id);null!==e&&(e.style.display="none")},this._buttonIdClick=function(){Dialog()},this.resolve_place=function(e,t,a,i){void 0===i&&(i="11"),jQuery.get(https+"://maps.googleapis.com/maps/api/geocode/json?latlng="+a+","+t,function(i){if(void 0!==i.results[0]&&void 0!==i.results[0].formatted_address)var n=i.results[0].formatted_address;else if(void 0!==a)n="@"+a+","+t;void 0!==n&&e.html(n)},"json")},this.draw_table=function(e){void 0===jQuery("#"+this.param.id+" table").html()&&(jQuery("#"+this.param.id).html("<table></table>"),jQuery("#"+this.param.id+" table").append("<tr><th>"+param.thumbText+"</th><th>"+param.similarText+"</th><th>"+param.utilizesText+"</th><th>"+param.timeText+"</th><th>"+param.placeText+"</th></tr>"))},this.load_info=function(e){if(!e)e=sp.ls.get();if(jQuery("#"+this.param.id+" table tr td").length<1)for(var t=0;e.length>t;t++)if(null!==jQuery("#"+this.param.id+" table ."+e[t].media_id)){var a="place",i=new Date(1e3*e[t].time),n="",r="Google maps";if(e[t].coordinates[0]&&e[t].coordinates[1]&&(n=a=e[t].coordinates[0]+","+e[t].coordinates[1]),e[t].country&&(a=e[t].country,e[t].city&&(a+=", "+e[t].city),r=a),e[t].coordinates[0]&&e[t].coordinates[1])a='<a href="'+(a="https://www.google.com/maps/dir//"+a+"/@"+n+",3z")+'" target="_blank">'+r+"</a>";else a=dic[lang][7];e[t].thumb_url="https://image.shutterstock.com/display_pic_with_logo/0/0/"+e[t].media_id+".jpg",jQuery("#"+this.param.id+" table").append('<tr id="ph'+e[t].media_id+"_"+t+'" style="max-height:40px;"><td class="thumb" style="width:105px"><a href="http://www.shutterstock.com/pic-'+e[t].media_id+'/index.html" target="_blank"><img src="'+e[t].thumb_url+'"></a></td><td class="similar"><a href="http://www.shutterstock.com/similar-'+e[t].media_id+'/index.html" target="_blank">Shutterstock</a></td><td class="google"><a href="https://www.google.com/searchbyimage?&amp;image_url='+window.encodeURI("http://image.shutterstock.com/display_pic_with_logo/0/0/"+e[t].media_id+".jpg")+'" target="_blank">Google images</a></td><td class="time" style="max-width:80px">'+i+'</td><td class="place" style="max-width:100px;">'+a+"</td></tr>"),e[t].country||e[t].city||void 0===e[t].coordinates[0]||void 0===e[t].coordinates[1]||ShutterPlacesWindowHelperScript.resolve_place(jQuery("#"+this.param.id+" table #ph"+e[t].media_id+"_"+t+" .place a"),e[t].coordinates[1],e[t].coordinates[0],11)}},this.Button=function(e){_ChangeMapOnClick(),"string"==typeof e&&(url=e);for(var t in e)param[t]=e[t];if(null===document.getElementById("ShutterPlacesTable"+sp.id)){var a=sp.ui.get_user_lang();void 0!==e&&(url=e.url||url);for(var t in keys)(void 0!==sp.dic[a][t]&&void 0===e||void 0===e[keys[t]])&&(param[keys[t]]=sp.dic[a][t]);var i=document.createElement("div"),n=document.createElement("style");n.innerHTML=["#ShutterPlacesTable"+sp.id+"{background:#3181FF","color:#fff","font-size:21px","font-weight:800","margin:0","border-radius:3px","max-width:200px","cursor: pointer",'font-family:"PT Sans"',"z-index:9999","line-height:26px","height:26px","text-transform:uppercase","overflow:hidden","text-align:center"].join(";")+"}",n.innerHTML+="#ShutterPlacesTable"+sp.id+":hover{"+["background:#1966CC","box-shadow:0 2px 4px 0 rgba(71,0,0,.31)"].join(";")+"}#ShutterPlacesTable"+sp.id+":active{margin-top:2px}",i.id="ShutterPlacesTable"+sp.id,i.innerHTML=param.buttonText,document.body.appendChild(n.cloneNode(!0)),document.getElementById("download-map-container").querySelector(".h4").appendChild(i.cloneNode(!0)),document.getElementById("ShutterPlacesTable"+sp.id).onclick=_buttonIdClick}},this._ChangeMapOnClick=function(){var e=document.getElementById("download-map");if(null!=e){e.onclick=function(t){this._ChangeMapOnClickHandler(e,!0)},e.ontouchend=function(t){this._ChangeMapOnClickHandler(e,!0)};var t=window.localStorage.getItem("m");null!=t&&"null"!=t&&"a"!=t||this._ChangeMapOnClickHandler(e,!1)}},this._ChangeMapOnClickHandler=function(e,t){for(var a=document.querySelectorAll(".leaflet-zoom-animated g path"),i=0;i<a.length;i++){var n,r=120+87*Math.random()^1;n="rgb("+r+","+r+","+r+")",a[i].setAttribute("fill",n)}},{Dialog:Dialog,Button:Button,_ChangeMapOnClickHandler:_ChangeMapOnClickHandler,_ChangeMapOnClick:_ChangeMapOnClick,param:param}}();